{"ast":null,"code":"var _jsxFileName = \"/home/nedal/todo-app/src/components/todo/context/context.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport superagent from 'superagent';\nimport base64 from 'base-64';\nimport jwt from 'jsonwebtoken';\nimport cookie from 'react-cookies';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const LoginContext = /*#__PURE__*/React.createContext();\nexport const SettingsContext = /*#__PURE__*/React.createContext();\nconst API = 'https://jam3ey.herokuapp.com';\nconst [LoggedIn, setLoggedIn] = useState(false);\nconst [user, setUser] = useState({\n  email: \"\",\n  capabilities: []\n});\nuser.capabilities = ['read', 'create'];\n\nconst loginFunction = async (username, password) => {\n  try {\n    const response = await superagent.post(`${API}/signin`).set('authorization', `Basic ${base64.encode(`${username}:${password}`)}`);\n    validateMyToken(response.body.token);\n  } catch (err) {}\n};\n\nconst logoutFunction = () => {\n  setLoggedIn(false);\n  setUser({});\n  cookie.remove('token');\n};\n\nconst validateMyToken = token => {\n  if (token) {\n    const user = jwt.decode(token);\n    console.log('user >>>', user);\n    setLoggedIn(true);\n    setUser(user);\n    cookie.save('token', token);\n  } else {\n    setLoggedIn(false);\n    setUser({});\n  }\n};\n\nuseEffect(() => {\n  const myTokenCookie = cookie.load('token');\n  validateMyToken(myTokenCookie);\n}, []);\n\nconst can = capability => {\n  var _user$capabilities;\n\n  return user === null || user === void 0 ? void 0 : (_user$capabilities = user.capabilities) === null || _user$capabilities === void 0 ? void 0 : _user$capabilities.includes(capability);\n};\n\nfunction Settings(props) {\n  _s();\n\n  let [numOfItems, setNum] = useState(3);\n  let [display, setDisplay] = useState(false);\n\n  const handleChangeNum = value => {\n    setNum(value);\n  };\n\n  useEffect(() => {\n    let data = JSON.parse(localStorage.getItem('configStting'));\n\n    if (data) {\n      handleChangeNum(data.numOfItems);\n      setDisplay(data.display);\n    }\n  });\n  console.log(numOfItems);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(SettingsContext.Provider, {\n      value: {\n        numOfItems,\n        handleChangeNum,\n        setDisplay\n      },\n      children: props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(Settings, \"b6oCM27bB2PA1Th3c76/nRB54Uk=\");\n\n_c = Settings;\nexport default Settings;\n\nvar _c;\n\n$RefreshReg$(_c, \"Settings\");","map":{"version":3,"sources":["/home/nedal/todo-app/src/components/todo/context/context.js"],"names":["React","useEffect","useState","superagent","base64","jwt","cookie","LoginContext","createContext","SettingsContext","API","LoggedIn","setLoggedIn","user","setUser","email","capabilities","loginFunction","username","password","response","post","set","encode","validateMyToken","body","token","err","logoutFunction","remove","decode","console","log","save","myTokenCookie","load","can","capability","includes","Settings","props","numOfItems","setNum","display","setDisplay","handleChangeNum","value","data","JSON","parse","localStorage","getItem","children"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport superagent from 'superagent';\nimport base64 from 'base-64';\nimport jwt from 'jsonwebtoken';\nimport cookie from 'react-cookies';\nexport const LoginContext = React.createContext();\n\nexport const SettingsContext = React.createContext();\n\n    const API = 'https://jam3ey.herokuapp.com';\n    const [LoggedIn, setLoggedIn] = useState(false);\n    const [user, setUser] = useState({ email: \"\", capabilities: [] });\n\n    user.capabilities = ['read', 'create'];\n\n    const loginFunction = async (username, password) => {\n        try {\n            const response = await superagent.post(`${API}/signin`).set('authorization', `Basic ${base64.encode(`${username}:${password}`)}`);\n            validateMyToken(response.body.token);\n        } catch (err) { }\n\n    }\n    const logoutFunction = () => {\n        setLoggedIn(false);\n        setUser({});\n        cookie.remove('token');\n    }\n\n    const validateMyToken = (token) => {\n        if (token) {\n            const user = jwt.decode(token);\n            console.log('user >>>', user);\n            setLoggedIn(true);\n            setUser(user);\n            cookie.save('token', token);\n        } else {\n            setLoggedIn(false);\n            setUser({});\n        }\n    }\n\n    useEffect(() => {\n      const myTokenCookie = cookie.load('token');\n      validateMyToken(myTokenCookie);\n  }, []);\n\n  const can = (capability) => {\n      return user?.capabilities?.includes(capability);\n  }\n\nfunction Settings(props) {\n  let [numOfItems, setNum] = useState(3);\n  let[display,setDisplay]=useState(false)\n\nconst handleChangeNum=(value)=>{\n    setNum(value)\n}\n  useEffect(()=>{\n  let data=JSON.parse(localStorage.getItem('configStting')) \n  if(data){\n    handleChangeNum(data.numOfItems)\n    setDisplay(data.display)\n  }\n  })\n   console.log(numOfItems)\n  return (\n    <>\n      <SettingsContext.Provider value={{numOfItems,handleChangeNum,setDisplay}}>\n        {props.children}\n      </SettingsContext.Provider>\n    </>\n  );\n}\n\nexport default Settings;\n"]},"metadata":{},"sourceType":"module"}